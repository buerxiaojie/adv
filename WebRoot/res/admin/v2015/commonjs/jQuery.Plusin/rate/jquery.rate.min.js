(function(a){a.rate=function(c,b){var e=a(c);var f=[];for(var d=0;d<b.rateMax;d++){f[d]=a(document.createElement("a")).attr("href","javascript:;").addClass(b.rateClass);f[d].attr("data-index",d+1);if(d<b.rated){f[d].addClass(b.ratedClass)}e.append(f[d])}a.each(f,function(){a(this).hover(function(){a(this).prevAll().add(a(this)).addClass(b.rateOverClass);var g=parseInt(a(this).attr("data-index"));if(a.isArray(b.starMsg)&&b.starMsg.length>=g){a("body").append("<p id='star-msg'>"+b.starMsg[g-1]+"</p>")}},function(){a(this).prevAll().add(a(this)).removeClass(b.rateOverClass);a(b.starMsg_id).remove()});a(this).mousemove(function(g){a(b.starMsg_id).css("top",(g.pageY-b.starMsg_xOffset)+"px").css("left",(g.pageX+b.starMsg_yOffset)+"px").fadeIn("fast")});a(this).click(function(){var g=parseInt(a(this).attr("data-index"));if(b.ratePage&&b.ratePage!=""){a.get(b.ratePage,{rate:g},function(h){(b.rateAfterEvent)(h)})}else{(b.rateAfterEvent)(g)}a(this).prevAll().add(a(this)).addClass(b.ratedClass);a(this).nextAll().removeClass(b.ratedClass)})})};a.fn.rate=function(b){b=b||{};b.rated=b.rated||0;b.rateMax=b.rateMax||5;b.rateClass=b.rateClass||"star";b.rateOverClass=b.rateOverClass||"star_on";b.ratedClass=b.ratedClass||"star_yes";b.rateAfterEvent=b.rateAfterEvent||function(){};b.ratePage=b.ratePage||"";b.starMsg=b.starMsg||[];b.starMsg_id=b.starMsg_id||"#star-msg";b.starMsg_xOffset=b.starMsg_xOffset||10;b.starMsg_yOffset=b.starMsg_yOffset||30;a.rate(this,b);return this}})(jQuery);
